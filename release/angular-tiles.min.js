/**
 * Window Tile Manager for AngularJS
 * @version v0.0.2
 * @link http://jamesehly.com/
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="angular-tiles"),function(a,b){"use strict";b.module("angular-tiles",[]);var c=function(){return{restrict:"AE",scope:{panelHeight:"@",panelOverflow:"@",panelStretch:"@",panelWidth:"@",panelHidden:"@",panelClose:"="},link:function(b,c){b.panelHeight||(b.panelHeight="100%"),b.panelWidth||(b.panelWidth="100%"),b.panelOverflow||(b.panelOverflow="hidden"),b.panelStretch||(b.panelStretch="vertical"),"true"===b.panelHidden&&(c[0].style.display="none"),"horizontal"===b.panelStretch&&(c[0].style.cssFloat="left"),b.$watch("panelClose",function(){c.attr("panel-hidden",b.panelClose),$(a).resize()}),c[0].style.overflow=b.panelOverflow,c.height(b.panelHeight),c.width(b.panelWidth)}}},d=function(){return{restrict:"AE",scope:{panelFullscreen:"@"},link:function(a,b){var c=new e(b),d=$($window);"false"===a.panelFullscreen&&(d=b.parent()),b.height(d.height()),b.width(d.width()),b[0].style.overflow="hidden",$($window).on("resize",function(){c.resizing||(c.resizing=!0,$timeout(function(){b.height(d.height()),b.width(d.width()),c.redrawChildPanels(b)},100))}),$($window).resize()}}};b.module("angular-tiles").directive("atTile",c).directive("atContainer",d);var e=function(){this.resizing=!1,this.resetDefaults()};e.prototype.resetDefaults=function(){this.panelChildren=!1,this.panelHeights=new Array,this.panelWidths=new Array,this.totalVerticalVariablePanels=0,this.totalHorizontalVariablePanels=0,this.totalVariablePanelHeight=0,this.totalVariablePanelWidth=0,this.currentPanel=!1},e.prototype.getPanelChildren=function(a){return this.panelChildren=a.children("[sy-panel]"),this.panelChildren.length>0?!0:!1},e.prototype.setCurrentPanel=function(a){this.currentPanel=$(a),this.currentPanelHeight=this.currentPanel.attr("panel-height"),this.currentPanelWidth=this.currentPanel.attr("panel-width"),this.currentPanelStretch=this.currentPanel.attr("panel-stretch"),this.currentPanelHidden=this.currentPanel.attr("panel-hidden"),this.currentPanelHeight||(this.currentPanelHeight="100%"),this.currentPanelWidth||(this.currentPanelWidth="100%")},e.prototype.loadPanelData=function(){var a=this;this.panelChildren.each(function(){a.setCurrentPanel(this),"true"!=a.currentPanelHidden&&(a.panelHeights.push(a.currentPanelHeight),a.panelWidths.push(a.currentPanelWidth))})},e.prototype.setTotalVariablePanelHeight=function(){for(var a in this.panelHeights)"100%"==this.panelHeights[a]?this.totalVerticalVariablePanels+=1:this.totalVariablePanelHeight-=parseInt(this.panelHeights[a]);this.totalVariablePanelHeight=this.totalVariablePanelHeight/this.totalVerticalVariablePanels},e.prototype.setTotalVariablePanelWidth=function(){for(var a in this.panelWidths)"100%"==this.panelWidths[a]?this.totalHorizontalVariablePanels+=1:this.totalVariablePanelWidth-=parseInt(this.panelWidths[a]);this.totalVariablePanelWidth=this.totalVariablePanelWidth/this.totalHorizontalVariablePanels},e.prototype.setPanelAttributes=function(){var a=this;this.panelChildren.each(function(){a.setCurrentPanel(this),a.currentPanelHeight&&"100%"!=a.currentPanelHeight||a.currentPanel.height(a.totalVariablePanelHeight),"horizontal"==a.currentPanelStretch&&(a.currentPanelWidth&&"100%"!=a.currentPanelWidth||a.currentPanel.width(a.totalVariablePanelWidth),a.currentPanel.height(a.totalVariablePanelHeight*a.totalVerticalVariablePanels)),a.currentPanel[0].style.display="true"==a.currentPanelHidden?"none":"block"}),this.panelChildren.each(function(){a.setCurrentPanel(this),a.redrawChildPanels(a.currentPanel)})},e.prototype.redrawChildPanels=function(a){this.resetDefaults(),this.getPanelChildren(a)&&(this.totalVariablePanelHeight=a.height(),this.totalVariablePanelWidth=a.width(),this.loadPanelData(),this.setTotalVariablePanelHeight(),this.setTotalVariablePanelWidth(),this.setPanelAttributes()),this.resizing=!1}}(window,window.angular);